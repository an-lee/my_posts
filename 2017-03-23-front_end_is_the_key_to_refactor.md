---
title: 优化前端架构是效能提升的关键
date: 2017-03-23 15:00
categories: fullstack
tags:
  - Rails
  - refactor
typora-copy-images-to: ..\uploads
---

首先记住一个重要结论，

> 为了提升网站效能，调整**前端架构**的优先级远大于后端架构。

这个结论有一个前提，就是*不考虑搬主机*。

那在网站效能上，为什么前端架构比后端架构远为重要呢？从我们打开网站的时间来分析

> 打开一个网站的时间 = 网站代码产生网页的时间 + 下载网页的时间 + 下载素材的时间

在这个公式里面，「网站代码产生网页的时间」是由网站的后端代码决定的，而「下载网页的时间」和「下载素材的时间」是由主机的物理位置和网站的前端架构决定的。

假如每次向服务器发起请求的时间是 230ms，那么只要向服务器发出一个请求都要 +230ms。主机的物理位置决定了这个请求时间，所以，服务器离用户越近，这个时间就越短。作为「个人户」，我们并不需要想太多，买服务器的时候，就近用户购买就可以了。

「网站代码产生网页的时间」一般大概是100ms ~200ms，后端的架构越好，这个时间越短，但是，好的后端架构与不太好的后端架构之间的时间差不过几百 ms，也就是「毫秒」级别的。换句话说，我们通常需要花很大的资源才可能把这个时间缩短。

![Picture](http://okgqgpbx3.bkt.clouddn.com/blog/2017-03-23-111644.jpg)

相比之下，前端的架构直接影响了「下载网页的时间」和「下载素材的时间」，这两个时间都有可能是「秒」级的。前端的架构的调整又比后端架构来得简单。因此，说到提高效能，首先应该想到的是

> 先调整前端架构。